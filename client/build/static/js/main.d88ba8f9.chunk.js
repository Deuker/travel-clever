(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{64:function(e,t,a){e.exports=a(92)},69:function(e,t,a){},72:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(26),s=a.n(o),l=a(19),i=(a(69),a(15)),c=a(16),u=a(18),m=a(17),p=a(62),h=a(58),d=a.n(h),g=a(25),f=a.n(g),E=(a(72),a(31)),v=a(95),b=a(97),w=a(94),y=a(12),k=a.n(y),O=function(e,t){return k.a.post("/api/auth/signup",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},j=function(e,t){return k.a.post("/api/auth/login",{username:e,password:t}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},C=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",message:""},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(E.a)({},n,r))},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.password;O(n,r).then((function(t){t.message?e.setState({message:t.message,username:"",password:""}):(e.props.setUser(t),e.props.history.push("/routes"))}))},e}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Signup"),r.a.createElement(v.a,{onSubmit:this.handleSubmit},r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,{htmlFor:"username"},"Username: "),r.a.createElement(v.a.Control,{type:"text",name:"username",value:this.state.username,onChange:this.handleChange,id:"username"})),r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,{htmlFor:"password"},"Password: "),r.a.createElement(v.a.Control,{type:"password",name:"password",value:this.state.password,onChange:this.handleChange,id:"password"})),this.state.message&&r.a.createElement(b.a,{variant:"danger"},this.state.message),r.a.createElement(w.a,{type:"submit"},"Signup")))}}]),a}(n.Component),S=a(96),B=function(e){console.log(e),k.a.delete("/api/auth/logout").then((function(e){return e.data})).catch((function(e){return e.response.data})).then((function(){e.setUser(null)}))},x=function(e){return r.a.createElement(S.a,{className:"nav justify-content-end",bg:"primary"},e.user&&r.a.createElement(S.a.Brand,null,"Welcome, ",e.user.username),r.a.createElement(S.a.Brand,null,r.a.createElement(l.b,{to:"/"},"Home")),e.user?r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a.Brand,null,r.a.createElement(l.b,{to:"/",onClick:function(){return B(e)}},"Logout")),r.a.createElement(S.a.Brand,null,r.a.createElement(l.b,{to:"/routes"},"My saved routes"))):r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a.Brand,null,r.a.createElement(l.b,{to:"/signup"},"Signup")),r.a.createElement(S.a.Brand,null,r.a.createElement(l.b,{to:"/login"},"Login"))))},D=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={username:"",password:"",message:""},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(E.a)({},n,r))},e.handleSubmit=function(t){t.preventDefault();var a=e.state,n=a.username,r=a.password;j(n,r).then((function(t){t.message?e.setState({message:t.message,username:"",password:""}):(e.props.setUser(t),e.props.history.push("/routes"))}))},e}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Login"),r.a.createElement(v.a,{onSubmit:this.handleSubmit},r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,{htmlFor:"username"},"Username: "),r.a.createElement(v.a.Control,{type:"text",name:"username",value:this.state.username,onChange:this.handleChange,id:"username"})),r.a.createElement(v.a.Group,null,r.a.createElement(v.a.Label,{htmlFor:"password"},"Password: "),r.a.createElement(v.a.Control,{type:"password",name:"password",value:this.state.password,onChange:this.handleChange,id:"password"})),this.state.message&&r.a.createElement(b.a,{variant:"danger"},this.state.message),r.a.createElement(w.a,{type:"submit"},"Login")))}}]),a}(n.Component),F=a(9),U=a(63),N=function(e){var t=e.component,a=e.user,n=e.path,o=e.redirectPath,s=void 0===o?"/":o,l=Object(U.a)(e,["component","user","path","redirectPath"]);return r.a.createElement(F.b,{path:n,render:function(e){return a?r.a.createElement(t,Object.assign({},e,l,{user:a})):r.a.createElement(F.a,{to:s})}})},I=function(e){return r.a.createElement("div",null,r.a.createElement("h1",null,"hi"),e.routes.length>0&&r.a.createElement("h2",null,"Routes:"),e.routes.map((function(e){return r.a.createElement("div",{key:e._id},r.a.createElement("h3",null,r.a.createElement(l.b,{to:"/routes/".concat(e._id)},e.startpoint," - ",e.endpoint)))})))},A=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={routes:[]},e.componentDidMount=function(){e.getData()},e.getData=function(){k.a.get("/api/routes").then((function(t){console.log(t),e.setState({routes:t.data})})).catch((function(e){console.log(e)}))},e}return Object(c.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"routes-container"},r.a.createElement(I,{routes:this.state.routes}))}}]),a}(n.Component),T=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={route:null,startpoint:"",endpoint:"",kilometer:"",co2emission:"",owner:"",error:null},e.deleteRoute=function(){var t=e.props.match.params.id;k.a.delete("/api/routes/".concat(t)).then((function(){e.props.history.push("/routes")})).catch((function(e){console.log(e)}))},e}return Object(c.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;return k.a.get("/api/routes/".concat(t)).then((function(t){var a=t.data,n=t.data.startpoint,r=t.data.endpoint,o=t.data.kilometer,s=t.data.co2emission,l=t.data.owner;e.setState({route:a,startpoint:n,endpoint:r,kilometer:o,co2emission:s,owner:l})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){if(this.state.error)return r.a.createElement("div",null,this.state.error);if(!this.state.route)return r.a.createElement(r.a.Fragment,null);var e=!1;return this.props.user&&(e=!0),r.a.createElement("div",null,r.a.createElement("h1",null,this.state.route.startpoint," - ",this.state.endpoint),e&&r.a.createElement(w.a,{variant:"danger",onClick:this.deleteRoute},"Delete this route"))}}]),a}(n.Component),L=function(e){return r.a.createElement("div",{className:"WelcomePage"},r.a.createElement("h2",null,"Welcome User XY"))},M=function(){return r.a.createElement("div",{className:"Dashboard"},r.a.createElement("h3",null,"Here we will show the Dashboard"),r.a.createElement("p",null,"Total kilometers rode"),r.a.createElement("p",null,"Total CO2 saved"))},P=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={showInfo:!0,co2emission:""},e.calculate=function(){var t=e.state.kilometer,a=parseFloat(t.split("km"));console.log("Co2 logic",a)},e.routeInfo=function(t){e.state.startpoint&&e.state.endpoint&&e.state.kilometer?e.setState({showInfo:!0}):e.setState({showInfo:!1})},e.handleSubmit=function(t){t.preventDefault();var a=e.props;console.log("Final data is: ",a),k.a.post("/api/routes",{startpoint:e.state.startpoint,endpoint:e.state.endpoint,kilometer:e.state.kilometer,co2emission:e.state.co2emission}).then((function(){console.log("CO2 Data:",e.state.co2emission)})).catch((function(e){console.log(e)}))},e}return Object(c.a)(a,[{key:"render",value:function(){return console.log("Banana",this.state),r.a.createElement("div",null,r.a.createElement("h1",null,"This represents the Profile Page"),r.a.createElement(L,null),r.a.createElement("h3",null,"Search Route:"),r.a.createElement("div",null,this.state.showInfo?r.a.createElement("div",null,r.a.createElement("div",null,"From: ",this.state.startpoint),r.a.createElement("div",null,"To: ",this.state.endpoint),r.a.createElement("div",null,"Distance: ",this.state.kilometer),r.a.createElement("div",null,"CO2:",this.state.co2emission,"kg"),r.a.createElement(w.a,{onClick:this.handleSubmit,type:"submit"},"Save")):""),r.a.createElement(M,null))}}],[{key:"getDerivedStateFromProps",value:function(e){return{startpoint:e.startpoint,endpoint:e.endpoint,kilometer:e.kilometer,co2emission:203.182*parseInt(e.kilometer)/1e3}}}]),a}(n.Component),W=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={user:e.props.user,showButton:!1,startpoint:"",endpoint:"",lat:52.52,lng:13.405,zoom:13,kilometer:""},e.componentDidMount=function(){var t=new f.a.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[-79.4512,43.6568],zoom:13});t.addControl(new d.a({accessToken:f.a.accessToken,unit:"metric",profile:"mapbox/cycling"}),"top-left"),t.addControl(new f.a.NavigationControl),setInterval((function(){var t=document.querySelector(".mapbox-directions-route-summary > h1");t&&!e.state.showButton?e.setState({showButton:!0}):!t&&e.state.showButton&&e.setState({showButton:!1})}),500)},e.getRoute=function(t){t.preventDefault();var a=document.querySelector(".mapbox-directions-route-summary > h1").innerHTML;console.log("distance: ",a);var n=document.getElementsByClassName("mapboxgl-ctrl-geocoder"),r=n[0].querySelector("input").value;console.log("from: ",r);var o=n[1].querySelector("input").value;console.log("to: ",o),e.setState({startpoint:r,endpoint:o,kilometer:a}),console.log("Hello",e.state.startpoint,e.state.endpoint,e.state.kilometer)},e.setUser=function(t){e.setState({user:t})},e}return Object(c.a)(a,[{key:"render",value:function(){var e=this;return console.log("Heeeiiiii",this.state.user),r.a.createElement("div",{className:"App"},r.a.createElement(x,{user:this.state.user,setUser:this.setUser}),r.a.createElement("div",{className:"pageContent"},r.a.createElement("div",{className:"map",style:this.state.user?{}:{display:"none"}},r.a.createElement("div",{id:"map"}),r.a.createElement("div",null,r.a.createElement(p.a,Object.assign({},this.state.viewport,{onViewportChange:function(t){return e.setState(t)},mapboxApiAccessToken:"pk.eyJ1IjoidmljdG9yaWF0b3JpYSIsImEiOiJja2EzbHVrMnowMzBzM2tyd2VsNnI2YnFiIn0.rZpPyrN5hdNxsnVtAWWCOQ"}))),this.state.showButton?r.a.createElement("button",{onClick:this.getRoute},"BUTTON"):""),r.a.createElement("div",{className:"layout"},r.a.createElement(P,{startpoint:this.state.startpoint,endpoint:this.state.endpoint,kilometer:this.state.kilometer}),r.a.createElement(F.d,null,r.a.createElement(F.b,{exact:!0,path:"/",user:this.state.user}),r.a.createElement(N,{exact:!0,path:"/routes",user:this.state.user,component:A}),";",r.a.createElement(N,{exact:!0,path:"/routes/:id",user:this.state.user,component:T}),";",r.a.createElement(F.b,{exact:!0,path:"/signup",render:function(t){return r.a.createElement(C,Object.assign({setUser:e.setUser},t))}}),r.a.createElement(F.b,{exact:!0,path:"/login",render:function(t){return r.a.createElement(D,Object.assign({setUser:e.setUser},t))}}),r.a.createElement(N,{exact:!0,path:"/dashboard",component:P,render:function(t){return r.a.createElement(P,Object.assign({},t,{startpoint:e.state.startpoint,endpoint:e.state.endpoint,kilometer:e.state.kilometer}))}})))))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));k.a.get("/api/auth/loggedin").then((function(e){console.log("User",e.data),s.a.render(r.a.createElement(l.a,null,r.a.createElement(W,{user:e.data})),document.getElementById("root"))})).catch((function(e){return console.log(e)})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[64,1,2]]]);
//# sourceMappingURL=main.d88ba8f9.chunk.js.map